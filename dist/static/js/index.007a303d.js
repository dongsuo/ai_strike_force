!function(){var e,r,t,s,n={76930:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var s=t("52676");t("75271");var n=t("58734"),a=t("35111"),o=t("60295"),l=t("21916");function i(){return(0,s.jsx)(n.w,{children:(0,s.jsx)(a.h,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-purple-50 p-4",children:[(0,s.jsxs)("header",{className:"container mx-auto max-w-3xl mb-6 text-center px-0",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI \u7FA4\u804A\u534F\u5546\u7CFB\u7EDF"}),(0,s.jsx)("p",{className:"text-default-500 mt-2",children:"\u8BA9\u591A\u4E2AAI\u6A21\u578B\u4E00\u8D77\u5E2E\u4F60\u89E3\u7B54\u95EE\u9898\uFF0C\u652F\u6301\u6301\u7EED\u5BF9\u8BDD"})]}),(0,s.jsxs)("main",{className:"container mx-auto space-y-6 pb-20 px-0",children:[(0,s.jsx)(o.t,{}),(0,s.jsx)(l.Q,{onSubmit:()=>{}})]})]})})})}},60295:function(e,r,t){"use strict";t.d(r,{t:function(){return f}}),t("64072"),t("87395");var s=t("52676"),n=t("75271"),a=t("68399"),o=t("67700"),l=t("61885"),i=t("44033"),d=t("6755"),c=t("36875"),u=t("35111"),m=t("68426");let f=()=>{let{currentConversation:e,isLoading:r}=(0,u.s)(),t=(0,n.useRef)(null),f=(0,n.useRef)(null);return((0,n.useEffect)(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})},[null==e?void 0:e.messages]),e||r)?r&&(!e||0===e.messages.length)?(0,s.jsx)(a.w,{className:"w-full max-w-3xl mx-auto mt-8 shadow-xl rounded-xl bg-gradient-to-b from-white to-default-50 border border-default-200",children:(0,s.jsx)(o.G,{className:"flex flex-col items-center justify-center py-12",children:(0,s.jsx)(l.c,{label:"\u6B63\u5728\u51C6\u5907\u5BF9\u8BDD...",color:"primary",labelColor:"primary",classNames:{wrapper:"w-16 h-16",circle1:"border-4",circle2:"border-4",label:"text-md font-medium mt-4"}})})}):(0,s.jsx)(a.w,{className:"w-full max-w-3xl mx-auto mt-8 shadow-xl flex flex-col h-[700px] rounded-xl border border-default-200 overflow-hidden bg-gradient-to-br from-white to-default-50",children:(0,s.jsxs)(o.G,{className:"py-4 px-4 flex flex-col flex-grow overflow-hidden",children:[(0,s.jsxs)("div",{className:"border-b pb-3 mb-4 flex-shrink-0 bg-gradient-to-r from-default-50 to-white -mx-4 px-4 rounded-t-xl",children:[(0,s.jsx)("h4",{className:"text-xl font-bold text-center bg-gradient-to-r from-primary-500 to-secondary-500 bg-clip-text text-transparent",children:"AI \u591A\u6A21\u578B\u534F\u4F5C"}),e&&(0,s.jsx)("div",{className:"flex justify-center mt-2",children:(0,s.jsx)(i.z,{size:"sm",color:e.isComplete?"success":"primary",variant:"flat",classNames:{base:`${e.isComplete?"bg-gradient-to-r from-success-50 to-success-100 border border-success-200":"bg-gradient-to-r from-primary-50 to-primary-100 border border-primary-200"} 
                    shadow-sm`},radius:"lg",children:e.isComplete?"\u5DF2\u5B8C\u6210":`\u{7B2C} ${e.currentRound}/${e.maxRounds} \u{8F6E}\u{8BA8}\u{8BBA}\u{4E2D}`})})]}),e&&e.models.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-4 justify-center flex-shrink-0 bg-default-50 py-2 rounded-xl border border-default-100",children:[(0,s.jsx)("span",{className:"text-sm text-default-500 mr-2 my-auto",children:"\u53C2\u4E0E\u6A21\u578B\uFF1A"}),e.models.map((e,r)=>(0,s.jsx)(d.e,{content:e.name,placement:"bottom",children:(0,s.jsx)(c.h,{className:`bg-gradient-to-br from-primary-${100+100*r} to-secondary-${100+100*r} text-white shadow-sm border border-default-200`,name:e.name.charAt(0),size:"sm",radius:"full"})},e.id))]}),(0,s.jsxs)("div",{ref:f,className:"space-y-3 overflow-y-auto flex-grow flex flex-col p-2",style:{overflowY:"auto",height:"100%"},children:[(0,s.jsx)("div",{className:"px-3 py-1 text-center",children:(0,s.jsx)("div",{className:"text-xs text-default-400 bg-default-50 inline-block px-3 py-1 rounded-full border border-default-100",children:"\u5BF9\u8BDD\u5F00\u59CB"})}),null==e?void 0:e.messages.map(r=>(0,s.jsx)(m.v,{message:r,models:e.models},r.id)),r&&(0,s.jsx)("div",{className:"flex justify-center py-4 flex-shrink-0",children:(0,s.jsxs)("div",{className:"bg-default-50 border border-default-100 px-5 py-3 rounded-xl shadow-sm flex items-center",children:[(0,s.jsx)(l.c,{size:"sm",color:"primary"}),(0,s.jsx)("span",{className:"ml-2 text-sm",children:"AI\u601D\u8003\u4E2D..."})]})}),(0,s.jsx)("div",{ref:t})]})]})}):(0,s.jsx)(a.w,{className:"w-full max-w-3xl mx-auto mt-8 shadow-xl rounded-xl bg-gradient-to-b from-white to-default-50 border border-default-200",children:(0,s.jsxs)(o.G,{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary-50 border border-primary-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"i-lucide-message-circle text-4xl text-primary-500"})})}),(0,s.jsx)("p",{className:"text-xl font-medium text-default-700 mb-2",children:"\u5F00\u59CB\u65B0\u7684\u591A\u6A21\u578B\u534F\u4F5C\u5BF9\u8BDD"}),(0,s.jsx)("p",{className:"text-default-500 max-w-md mx-auto",children:"\u8BF7\u8F93\u5165\u95EE\u9898\u5E76\u9009\u62E9AI\u6A21\u578B\u6765\u5F00\u59CB\u4E00\u6B21\u65B0\u7684\u5BF9\u8BDD\uFF0C\u6700\u591A\u53EF\u9009\u62E94\u4E2A\u6A21\u578B\u8FDB\u884C\u534F\u4F5C\u89E3\u7B54"})]})})}},68426:function(e,r,t){"use strict";t.d(r,{v:function(){return d}}),t("66364"),t("31907"),t("67475");var s=t("52676");t("75271");var n=t("44033"),a=t("36875"),o=t("68399"),l=t("67700"),i=t("53968");let d=e=>{let{message:r,models:t}=e,d="user"===r.sender,c=r.isDiscussion&&!r.modelId,u=r.modelId?t.find(e=>e.id===r.modelId):null,m=u?u.name:"\u7CFB\u7EDF",f=new Date(r.timestamp).toLocaleTimeString(),x="",h="",p=null;return d?(x="bg-gradient-to-br from-primary-50 to-primary-100 border border-primary-200",h="bg-primary-500"):c?x="bg-gradient-to-b from-default-100 to-default-200 border border-default-300 mx-auto":r.isSummary?(x="bg-gradient-to-br from-success-50 to-success-100 border border-success-200 shadow-md",h="bg-success-500",p=(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(n.z,{color:"success",variant:"flat",size:"sm",className:"mr-2 shadow-sm",children:"\u603B\u7ED3"}),(0,s.jsxs)("span",{className:"text-small font-semibold",children:[m," \u7684\u603B\u7ED3"]})]})):r.isDiscussion?(x="bg-gradient-to-br from-secondary-50 to-secondary-100 border border-secondary-200",h="bg-secondary-500",p=(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(n.z,{color:"secondary",variant:"flat",size:"sm",className:"mr-2 shadow-sm",children:"\u8BA8\u8BBA"}),(0,s.jsx)("span",{className:"text-small font-semibold",children:m})]})):(x="bg-gradient-to-b from-white to-default-50 border border-default-200",h="bg-default-500",p=(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(a.h,{name:m.charAt(0),size:"sm",className:`mr-2 ${h} text-white shadow-sm`}),(0,s.jsx)("span",{className:"text-small font-semibold",children:m})]})),(0,s.jsx)("div",{className:`flex w-full ${d?"justify-end":c?"justify-center":"justify-start"} mb-4`,children:(0,s.jsxs)(o.w,{className:`${c?"max-w-[70%]":"max-w-[80%]"} ${x} shadow-sm rounded-xl`,radius:"lg",children:[(0,s.jsxs)(l.G,{className:"py-3 px-4",children:[!d&&!c&&p,(0,s.jsx)("div",{className:"whitespace-pre-line text-sm",children:r.content})]}),!c&&(0,s.jsx)(i.i,{className:"p-1 px-3 justify-end border-t border-default-100",children:(0,s.jsx)("span",{className:"text-tiny text-default-400",children:f})})]})})}},73564:function(e,r,t){"use strict";t.d(r,{O:function(){return f}}),t("56972"),t("56879"),t("51540"),t("50638"),t("94910"),t("70126"),t("80886"),t("43605"),t("20540"),t("56580"),t("73845"),t("79388"),t("3522"),t("50294"),t("68522"),t("49200"),t("21911"),t("25615"),t("39526"),t("98774"),t("69191"),t("83848"),t("32768"),t("18936"),t("54335"),t("67475"),t("1056"),t("64072"),t("87395"),t("66364"),t("31907");var s=t("52676"),n=t("75271"),a=t("39050"),o=t("86921"),l=t("25376"),i=t("16714"),d=t("47498"),c=t("44033"),u=t("36536"),m=t("60762");let f=e=>{let{onSelectionChange:r,maxModels:t=4,initialSelection:f=[]}=e,{models:x,isLoading:h,error:p}=(0,m.b)(),[b,g]=(0,n.useState)(new Set(f)),[w,y]=(0,n.useState)(""),[j,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{r(Array.from(b))},[b,r]);let N=(e,r)=>{g(s=>{let n=new Set(s);if(r){if(n.size>=t)return s;n.add(e)}else n.delete(e);return n})},C=(0,n.useMemo)(()=>x?w.trim()?x.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.description.toLowerCase().includes(w.toLowerCase())):x:[],[x,w]),A=(0,n.useMemo)(()=>[...C].sort((e,r)=>e.name.localeCompare(r.name,void 0,{sensitivity:"base"})),[C]);return p?(0,s.jsx)("div",{className:"text-danger",children:"\u65E0\u6CD5\u52A0\u8F7D\u6A21\u578B\u5217\u8868"}):(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)(a.j,{isOpen:j,onOpenChange:v,placement:"bottom",showArrow:!0,offset:10,classNames:{content:"p-0 border border-default-200 bg-gradient-to-b from-white to-default-50 shadow-xl rounded-xl"},children:[(0,s.jsx)(o.b,{children:(0,s.jsx)(l.A,{variant:"flat",endContent:(0,s.jsx)(u.v4,{}),isLoading:h,className:"w-full justify-between bg-gradient-to-r from-default-50 to-default-100 border border-default-200 hover:bg-default-100 transition-all",radius:"lg",children:(()=>{if(!x)return"\u9009\u62E9AI\u6A21\u578B";let e=x.filter(e=>b.has(e.id));return 0===e.length?"\u9009\u62E9AI\u6A21\u578B":1===e.length?e[0].name:`\u{5DF2}\u{9009}\u{62E9} ${e.length} \u{4E2A}\u{6A21}\u{578B}`})()})}),(0,s.jsxs)(i.g,{className:"w-[320px] p-0 overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-[300px] sticky top-0 z-10 bg-white border-b border-default-200 px-1 pt-1 pb-2",children:[(0,s.jsx)(d.Y,{placeholder:"\u641C\u7D22\u6A21\u578B...",size:"sm",startContent:(0,s.jsx)(u.W1,{size:16,className:"text-default-400"}),value:w,onChange:e=>y(e.target.value),classNames:{inputWrapper:"w-full border border-default-200 hover:border-primary-300 focus-within:border-primary-500 rounded-lg h-9"},clearable:!0,autoFocus:!0}),b.size>=t&&(0,s.jsxs)("div",{className:"text-xs text-warning mt-2 mx-2 px-2 py-1 bg-warning-50 rounded-lg border border-warning-200 flex items-center",children:[(0,s.jsx)("span",{className:"i-lucide-alert-circle mr-1 text-warning"}),"\u5DF2\u8FBE\u5230\u6700\u5927\u9009\u62E9\u6570\u91CF (",t,")"]})]}),(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-auto py-2 bg-white",children:A.length>0?A.map(e=>{let r=b.has(e.id),n=!r&&b.size>=t;return(0,s.jsxs)("div",{className:`px-3 py-2.5 cursor-pointer transition-all flex items-center gap-2 mx-1 my-0.5 rounded-lg ${n?"opacity-50 cursor-not-allowed":r?"bg-primary-50 border-primary-100 border":"hover:bg-default-100"}`,onClick:()=>{!n&&N(e.id,!r)},children:[(0,s.jsxs)("div",{className:"relative flex items-center justify-center w-5 h-5",children:[(0,s.jsx)("input",{type:"checkbox",checked:r,onChange:r=>{!n&&N(e.id,r.target.checked)},disabled:n,className:"h-4 w-4 rounded border-2 border-default-300 text-primary-500 focus:ring-primary-400"}),r&&(0,s.jsx)("span",{className:"absolute top-0 right-0 -mt-1 -mr-1 w-2 h-2 bg-primary-500 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-0 flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,s.jsx)("span",{className:"text-xs text-default-500",children:e.description})]})]},e.id)}):(0,s.jsxs)("div",{className:"py-4 text-center text-default-400",children:[(0,s.jsx)("div",{className:"mx-auto w-8 h-8 mb-2 rounded-full bg-default-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"i-lucide-search text-lg text-default-400"})}),"\u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u6A21\u578B"]})})]})]}),b.size>0&&x&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-3",children:Array.from(b).map(e=>{let r=x.find(r=>r.id===e);return r?(0,s.jsx)(c.z,{onClose:()=>N(e,!1),variant:"flat",size:"sm",color:"primary",classNames:{base:"bg-gradient-to-r from-primary-50 to-default-50 border border-primary-100",content:"font-medium"},radius:"lg",children:r.name},e):null})})]})}},21916:function(e,r,t){"use strict";t.d(r,{Q:function(){return m}});var s=t("52676"),n=t("75271"),a=t("68399"),o=t("67700"),l=t("25621"),i=t("53968"),d=t("25376"),c=t("73564"),u=t("35111");let m=e=>{let{onSubmit:r}=e,[t,m]=(0,n.useState)(""),[f,x]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),{currentConversation:b,isLoading:g,startNewConversation:w,continueConversation:y}=(0,u.s)(),j=b&&b.isComplete;(0,n.useEffect)(()=>{(null==b?void 0:b.modelIds)&&x(b.modelIds)},[b]);let v=async()=>{if(!!t.trim()&&!h){if(j||0!==f.length){p(!0);try{j?await y(t.trim()):await w({question:t.trim(),modelIds:f}),m(""),r()}catch(e){console.error("Error handling question:",e)}finally{p(!1)}}}};return(0,s.jsx)("div",{className:"flex flex-col gap-4 w-full max-w-3xl mx-auto",children:(0,s.jsxs)(a.w,{className:"w-full shadow-xl rounded-xl border border-default-200 bg-gradient-to-b from-white to-default-50",children:[(0,s.jsxs)(o.G,{className:"gap-4 px-4 py-4",children:[(0,s.jsx)(l.Y,{label:j?"\u8FFD\u95EE":"\u8F93\u5165\u60A8\u7684\u95EE\u9898",placeholder:j?"\u8F93\u5165\u60A8\u7684\u8FFD\u95EE\u6216\u6DF1\u5165\u63A2\u8BA8\u7684\u5185\u5BB9...":"\u4F8B\u5982\uFF1A\u5206\u6790\u4EBA\u5DE5\u667A\u80FD\u5BF9\u672A\u6765\u5C31\u4E1A\u5E02\u573A\u7684\u5F71\u54CD...",value:t,onChange:e=>m(e.target.value),minRows:3,maxRows:6,className:"w-full",classNames:{inputWrapper:"bg-white shadow-sm border-2 border-default-200 focus-within:border-primary-300 rounded-xl data-[hover=true]:border-primary-200",input:"font-medium",label:"font-medium text-default-700"}}),!j&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(c.O,{onSelectionChange:e=>{x(e)},maxModels:4,initialSelection:(null==b?void 0:b.modelIds)||[]})})]}),(0,s.jsx)(i.i,{className:"justify-end border-t border-default-200 bg-default-50 rounded-b-xl px-4 py-3",children:(0,s.jsx)(d.A,{color:"primary",onPress:v,isLoading:h||g,isDisabled:!t.trim()||!j&&0===f.length,className:"bg-gradient-to-r from-primary-500 to-primary-600 shadow-lg hover:shadow-xl transition-all duration-300 font-medium",radius:"lg",size:"lg",children:h||g?"\u5904\u7406\u4E2D...":j?"\u53D1\u9001\u8FFD\u95EE":"\u53D1\u8D77\u5BF9\u8BDD"})})]})})}},36536:function(e,r,t){"use strict";t.d(r,{W1:function(){return a},v4:function(){return n}});var s=t("52676");t("75271");let n=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m6 9 6 6 6-6"})}),a=e=>{let{size:r=24,...t}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,s.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}},35111:function(e,r,t){"use strict";t.d(r,{h:function(){return l},s:function(){return i}}),t("19608");var s=t("52676"),n=t("75271"),a=t("50211");let o=(0,n.createContext)(void 0),l=e=>{let{children:r}=e,[t,l]=(0,n.useState)(null),[i,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),m=async e=>{d(!0),u(null);try{let r=await a.E.startConversation(e);l(r)}catch(e){u(e instanceof Error?e:Error("\u542F\u52A8\u5BF9\u8BDD\u65F6\u53D1\u751F\u672A\u77E5\u9519\u8BEF")),console.error("Error starting conversation:",e)}finally{d(!1)}},f=async e=>{if(!t){u(Error("\u6CA1\u6709\u6D3B\u8DC3\u7684\u5BF9\u8BDD"));return}d(!0),u(null);try{let r={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,sender:"user",content:e,timestamp:Date.now()},s={...t,messages:[...t.messages,r],isComplete:!1};l(s);let n={conversationId:t.id,question:e},o=await a.E.continueConversation(n,s);l(o)}catch(e){u(e instanceof Error?e:Error("\u7EE7\u7EED\u5BF9\u8BDD\u65F6\u53D1\u751F\u672A\u77E5\u9519\u8BEF")),console.error("Error continuing conversation:",e),t&&l({...t,isComplete:!0})}finally{d(!1)}};return(0,s.jsx)(o.Provider,{value:{currentConversation:t,isLoading:i,error:c,startNewConversation:m,continueConversation:f,clearConversation:()=>{l(null),u(null)}},children:r})},i=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useConversation must be used within a ConversationProvider");return e}},60693:function(e,r,t){"use strict";var s=t("52676");t("75271");var n=t("38751"),a=t("76930");t("56563"),n.createRoot(document.getElementById("root")).render((0,s.jsx)(a.Z,{}))},60762:function(e,r,t){"use strict";t.d(r,{b:function(){return a}});var s=t("1813"),n=t("50211");let a=()=>{let{data:e,error:r,isLoading:t,mutate:a}=(0,s.ZP)("models",async()=>{try{return await n.E.getModels()}catch(e){throw console.error("Failed to fetch models:",e),e}},{revalidateOnFocus:!1,revalidateIfStale:!1,onErrorRetry:(e,r,t,s,n)=>{let{retryCount:a}=n;!(a>=3)&&setTimeout(()=>s({retryCount:a}),5e3)}});return{models:e,isLoading:t,error:r,refetch:a}}},50211:function(e,r,t){"use strict";t.d(r,{E:function(){return a}}),t("19608"),t("64072"),t("87395"),t("66364"),t("31907"),t("67475"),t("18936"),t("54335"),t("1056"),t("34210"),t("74382"),t("8870");let s=t("69022").Z.create({baseURL:"https://openrouter-load-balancer.dongsuo.workers.dev",timeout:6e4,headers:{"Content-Type":"application/json"}}),n=e=>`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={async getModels(){try{console.log("\u6B63\u5728\u83B7\u53D6\u6A21\u578B\u5217\u8868...");let e=await s.get("/free/models");if(console.log("\u6A21\u578B\u5217\u8868\u54CD\u5E94:",e.data),!e.data)throw Error("\u670D\u52A1\u7AEF\u8FD4\u56DE\u7A7A\u6570\u636E");let r=[];if(e.data.free_models&&Array.isArray(e.data.free_models))r=e.data.free_models;else if(Array.isArray(e.data))r=e.data;else if(e.data.data&&Array.isArray(e.data.data))r=e.data.data.map(e=>e.id);else{let t=Object.values(e.data).find(e=>Array.isArray(e));t&&(r=Array.isArray(t[0])?t:"string"==typeof t[0]?t:t.map(e=>e.id||e))}if(0===r.length)throw Error("\u6CA1\u6709\u627E\u5230\u53EF\u7528\u7684\u6A21\u578B");return r.map(e=>{let r=e.replace(/:free$/,""),t=r.split("/"),s=(t.length>1?t[1].replace(/-/g," ").replace(/(\d+(\.\d+)?)([a-z])/g,"$1 $3"):r).split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return{id:r,name:s,description:`${t[0]||"\u672A\u77E5\u63D0\u4F9B\u5546"} \u{63D0}\u{4F9B}\u{7684} ${s} \u{6A21}\u{578B}`,isFree:!0}})}catch(e){throw console.error("Error fetching models:",e),Error("\u65E0\u6CD5\u83B7\u53D6\u6A21\u578B\u5217\u8868\uFF0C\u8BF7\u786E\u8BA4\u7F51\u7EDC\u8FDE\u63A5\u548CAPI\u914D\u7F6E")}},async createChatCompletion(e,r){try{return(await s.post("/chat/completions",{model:e,messages:r})).data.choices[0].message.content}catch(r){throw console.error(`Error getting response from model ${e}:`,r),Error(`\u{4ECE}\u{6A21}\u{578B} ${e} \u{83B7}\u{53D6}\u{54CD}\u{5E94}\u{5931}\u{8D25}`)}},async startConversation(e){try{let{question:r,modelIds:t}=e,s=(await this.getModels()).filter(e=>t.includes(e.id)),a=n("conv"),o=[{role:"system",content:"\u4F60\u662F\u4E00\u4E2A\u6709\u7528\u7684AI\u52A9\u624B\uFF0C\u8BF7\u76F4\u63A5\u56DE\u7B54\u7528\u6237\u7684\u95EE\u9898\uFF0C\u4E0D\u9700\u8981\u6DFB\u52A0\u4EFB\u4F55\u524D\u7F00\u3002"},{role:"user",content:r}],l=[{id:n("msg"),sender:"user",content:r,timestamp:Date.now()}],i=[];for(let e of t){let r=await this.createChatCompletion(e,o);l.push({id:n("msg"),sender:"assistant",modelId:e,content:r,timestamp:Date.now()}),i.push({modelId:e,content:r})}return this.proceedToNextRound({id:a,modelIds:t,models:s,messages:l,rounds:[{roundNumber:1,userQuestion:r,responses:i}],currentRound:1,maxRounds:3,isComplete:!1})}catch(e){throw console.error("Error starting conversation:",e),Error("\u521B\u5EFA\u5BF9\u8BDD\u5931\u8D25")}},async proceedToNextRound(e){try{let{currentRound:r,maxRounds:t,modelIds:s,rounds:a,messages:o}=e;if(r>=t)return await this.generateFinalSummary(e);let l=a[r-1].responses,i=`\u{4EE5}\u{4E0B}\u{662F}\u{51E0}\u{4E2A}AI\u{52A9}\u{624B}\u{5BF9}\u{95EE}\u{9898}\u{7684}\u{56DE}\u{7B54}\u{FF0C}\u{8BF7}\u{4F60}\u{4ED4}\u{7EC6}\u{9605}\u{8BFB}\u{8FD9}\u{4E9B}\u{56DE}\u{7B54}\u{FF0C}\u{5E76}\u{63D0}\u{51FA}\u{4F60}\u{5BF9}\u{5176}\u{4ED6}\u{56DE}\u{7B54}\u{7684}\u{770B}\u{6CD5}\u{FF0C}\u{6307}\u{51FA}\u{4ED6}\u{4EEC}\u{7684}\u{4F18}\u{70B9}\u{548C}\u{4E0D}\u{8DB3}\u{FF0C}\u{4EE5}\u{53CA}\u{4F60}\u{8BA4}\u{4E3A}\u{54EA}\u{4E2A}\u{56DE}\u{7B54}\u{6700}\u{597D}\u{FF0C}\u{4E3A}\u{4EC0}\u{4E48}\u{3002}\u{5982}\u{679C}\u{4F60}\u{57FA}\u{672C}\u{540C}\u{610F}\u{6240}\u{6709}\u{56DE}\u{7B54}\u{FF0C}\u{53EF}\u{4EE5}\u{76F4}\u{63A5}\u{8BF4}"\u{6211}\u{540C}\u{610F}\u{4EE5}\u{4E0A}\u{56DE}\u{7B54}"\u{3002}

${l.map((e,r)=>`\u{6A21}\u{578B}${r+1}\u{7684}\u{56DE}\u{7B54}\u{FF1A}
${e.content}
`).join("\n")}`,d=r+1,c=[],u=[];for(let r of(u.push({id:n("msg"),sender:"assistant",content:`==== \u{7B2C}${d}\u{8F6E}\u{8BA8}\u{8BBA} ====`,timestamp:Date.now(),isDiscussion:!0}),s)){let t=[{role:"system",content:"\u4F60\u662F\u4E00\u4E2A\u6709\u7528\u7684AI\u52A9\u624B\uFF0C\u73B0\u5728\u6B63\u5728\u4E0E\u5176\u4ED6AI\u52A9\u624B\u8BA8\u8BBA\u4E00\u4E2A\u95EE\u9898\u3002"},{role:"user",content:i}],s=await this.createChatCompletion(r,t),l=s.includes("\u540C\u610F")&&!s.includes("\u4E0D\u540C\u610F")&&!s.includes("\u4E0D\u8D5E\u540C");if(u.push({id:n("msg"),sender:"assistant",modelId:r,content:s,timestamp:Date.now(),isDiscussion:!0}),c.push({modelId:r,content:s}),l){console.log("\u6A21\u578B\u5DF2\u8FBE\u6210\u5171\u8BC6\uFF0C\u63D0\u524D\u7ED3\u675F\u8BA8\u8BBA");let r={...e,messages:[...o,...u],rounds:[...a,{roundNumber:d,discussionPrompt:i,responses:c}],currentRound:d};return await this.generateFinalSummary(r)}}let m={...e,messages:[...o,...u],rounds:[...a,{roundNumber:d,discussionPrompt:i,responses:c}],currentRound:d};return await this.proceedToNextRound(m)}catch(e){throw console.error("Error proceeding to next round:",e),Error("\u8FDB\u884C\u4E0B\u4E00\u8F6E\u8BA8\u8BBA\u5931\u8D25")}},async generateFinalSummary(e){try{let{modelIds:r,rounds:t,messages:s}=e,a=r[0],o=t.flatMap(e=>e.responses),l=`\u{73B0}\u{5728}\u{8BF7}\u{4F60}\u{4F5C}\u{4E3A}\u{4E3B}\u{6301}\u{4EBA}\u{FF0C}\u{6839}\u{636E}\u{6240}\u{6709}AI\u{52A9}\u{624B}\u{7684}\u{8BA8}\u{8BBA}\u{FF0C}\u{7ED9}\u{51FA}\u{4E00}\u{4E2A}\u{6700}\u{7EC8}\u{7684}\u{603B}\u{7ED3}\u{56DE}\u{7B54}\u{3002}\u{4F60}\u{7684}\u{56DE}\u{7B54}\u{5E94}\u{8BE5}\u{5305}\u{542B}\u{5404}\u{79CD}\u{89C2}\u{70B9}\u{FF0C}\u{5E76}\u{5C3D}\u{53EF}\u{80FD}\u{5168}\u{9762}\u{5730}\u{56DE}\u{7B54}\u{539F}\u{59CB}\u{95EE}\u{9898}\u{3002}

\u{539F}\u{59CB}\u{95EE}\u{9898}: ${t[0].userQuestion}

${o.map((e,r)=>`\u{6A21}\u{578B}${e.modelId.split("/").pop()||r+1}\u{7684}\u{56DE}\u{7B54}\u{FF1A}
${e.content}
`).join("\n")}`,i=await this.createChatCompletion(a,[{role:"system",content:"\u4F60\u662F\u4E00\u4E2A\u516C\u6B63\u7684\u603B\u7ED3\u8005\uFF0C\u8D1F\u8D23\u6574\u5408\u591A\u4E2AAI\u52A9\u624B\u7684\u89C2\u70B9\uFF0C\u63D0\u4F9B\u4E00\u4E2A\u5168\u9762\u7684\u6700\u7EC8\u7B54\u6848\u3002"},{role:"user",content:l}]),d={id:n("msg"),sender:"assistant",modelId:a,content:i,timestamp:Date.now(),isSummary:!0},c=[...s,{id:n("msg"),sender:"assistant",content:"==== \u6700\u7EC8\u603B\u7ED3 ====",timestamp:Date.now(),isDiscussion:!0},d];return{...e,messages:c,summary:i,isComplete:!0}}catch(e){throw console.error("Error generating final summary:",e),Error("\u751F\u6210\u6700\u7EC8\u603B\u7ED3\u5931\u8D25")}},async continueConversation(e,r){try{let{question:t}=e,{modelIds:s,models:a,messages:o,rounds:l,summary:i}=r,d={id:n("msg"),sender:"user",content:t,timestamp:Date.now()},c=[...o,d],u=e=>{let r=[{role:"system",content:"\u4F60\u662F\u4E00\u4E2A\u6709\u7528\u7684AI\u52A9\u624B\uFF0C\u6B63\u5728\u56DE\u7B54\u7528\u6237\u7684\u8FFD\u95EE\u3002\u8BF7\u53C2\u8003\u4E4B\u524D\u7684\u8BA8\u8BBA\u548C\u603B\u7ED3\u3002"}];r.push({role:"user",content:l[0].userQuestion||""});let s=l[0].responses.find(r=>r.modelId===e);return s&&r.push({role:"assistant",content:s.content}),i&&r.push({role:"system",content:`\u{4E4B}\u{524D}\u{8BA8}\u{8BBA}\u{7684}\u{603B}\u{7ED3}: ${i}`}),r.push({role:"user",content:t}),r},m=[],f=[];for(let e of s){let r=u(e),t=await this.createChatCompletion(e,r);m.push({modelId:e,content:t}),f.push({id:n("msg"),sender:"assistant",modelId:e,content:t,timestamp:Date.now()})}let x=l.length+1,h={...r,messages:[...c,...f],rounds:[...l,{roundNumber:x,userQuestion:t,responses:m}],currentRound:1,isComplete:!1};return this.proceedToNextRound(h)}catch(e){throw console.error("Error continuing conversation:",e),Error("\u7EE7\u7EED\u5BF9\u8BDD\u5931\u8D25")}},getHistory:async()=>[]}},56563:function(e,r,t){"use strict";t.r(e.exports={})}},a={};function o(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return n[e].call(t.exports,t,t.exports,o),t.exports}o.m=n,o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,{a:r}),r},o.d=function(e,r){for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.k=function(e){return""+e+".css"},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nc=void 0,e=[],o.O=function(r,t,s,n){if(t){n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[t,s,n];return}for(var l=1/0,a=0;a<e.length;a++){for(var t=e[a][0],s=e[a][1],n=e[a][2],i=!0,d=0;d<t.length;d++)l>=n&&Object.keys(o.O).every(function(e){return o.O[e](t[d])})?t.splice(d--,1):(i=!1,n<l&&(l=n));if(i){e.splice(a--,1);var c=s();void 0!==c&&(r=c)}}return r},o.p="/",r={980:0},o.O.j=function(e){return 0===r[e]},t=function(e,t){var s=t[0],n=t[1],a=t[2],l,i,d=0;if(s.some(function(e){return 0!==r[e]})){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(a)var c=a(o)}for(e&&e(t);d<s.length;d++)i=s[d],o.o(r,i)&&r[i]&&r[i][0](),r[i]=0;return o.O(c)},(s=self.webpackChunkAIStrikeForce=self.webpackChunkAIStrikeForce||[]).forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s));var l=o.O(void 0,["126","72","361","757"],function(){return o("60693")});o.O(l)}();